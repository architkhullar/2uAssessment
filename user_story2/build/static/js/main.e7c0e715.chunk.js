(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){e.exports=a(163)},120:function(e,t,a){},149:function(e,t){},152:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(10),r=a.n(o),s=(a(120),a(41)),c=a(25),l=a(19),d=a(28),h=a(26),u=a(11),m=a(29),v=a(94),g=a.n(v),p=a(95),b=a.n(p),f=(a(152),a(4)),_=a(214),E=a(215),C=a(216),y=a(219),D=a(208),S=a(68),j=a(222),O=a(211),k=a(213),I=a(212),w=a(102),A=a.n(w),N=a(52),R=a(217),M=a(221),x=a(207),V=a(205),T=a(204),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={_id:null,invoice_number:"12345",total:"00.00",currency:"USD",invoice_date:"2019-08-24",due_date:"2019-08-24",vendor_name:"Vendor",remittance_address:"Address",invoice_numberError:!1,totalError:!1,currencyError:!1,invoice_dateError:!1,due_dateError:!1,vendor_nameError:!1,remittance_addressError:!1},a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleClose=a.handleClose.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.invoice&&this.state.prevInvoice!==e.invoice&&this.setState(Object(s.a)({_id:null},e.invoice,{prevInvoice:e.invoice}))}},{key:"handleInputChange",value:function(e){this.setState(Object(N.a)({},e.currentTarget.getAttribute("name"),e.target.value))}},{key:"handleSubmit",value:function(e){var t={invoice_number:this.state.invoice_number.trim(),total:parseInt(this.state.total),currency:this.state.currency.trim(),invoice_date:this.state.invoice_date.trim(),due_date:this.state.due_date.trim(),vendor_name:this.state.vendor_name.trim(),remittance_address:this.state.remittance_address.trim()},a={};t.invoice_number||(a.invoice_numberError=!0),t.currency||(a.currencyError=!0),t.invoice_date||(a.invoice_dateError=!0),t.due_date||(a.due_dateError=!0),t.vendor_name||(a.vendor_nameError=!0),t.remittance_address||(a.remittance_addressError=!0),isNaN(t.total)&&(a.totalError=!0),t.total<=0&&(a.totalError=!0),Object.keys(a).length>0?this.setState(a):(this.setState({invoice_numberError:!1,totalError:!1,currencyError:!1,invoice_dateError:!1,due_dateError:!1,vendor_nameError:!1,remittance_addressError:!1}),"function"===typeof this.props.onSubmit&&this.props.onSubmit(e,{_id:this.state._id,invoice_number:t.invoice_number,total:t.total,currency:t.currency,invoice_date:t.invoice_date,due_date:t.due_date,vendor_name:t.vendor_name,remittance_address:t.remittance_address}))}},{key:"handleClose",value:function(e){this.setState({invoice_numberError:!1,totalError:!1,currencyError:!1,invoice_dateError:!1,due_dateError:!1,vendor_nameError:!1,remittance_addressError:!1}),"function"===typeof this.props.onClose&&this.props.onClose(e)}},{key:"render",value:function(){return i.a.createElement(M.a,{open:this.props.show,onClose:this.handleClose,"aria-labelledby":"invoice-dialog-title"},i.a.createElement(T.a,{id:"invoice-dialog-title",disableTypography:!0},i.a.createElement(S.a,{variant:"h5"},"Create Invoices")),i.a.createElement(V.a,null,i.a.createElement(R.a,{error:this.state.invoice_numberError,id:"invoice-dialog-invoice_number",label:"Invoice Number",name:"invoice_number",value:this.state.invoice_number,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.invoice_numberError?"Invoice Number is required":""}),i.a.createElement(R.a,{error:this.state.totalError,id:"invoice-dialog-total",type:"number",label:"total",name:"total",value:this.state.total,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.totalError?"Must be > 0":""}),i.a.createElement(R.a,{error:this.state.currencyError,id:"invoice-dialog-currency",label:"Currency Error",name:"currency",value:this.state.currency,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.currencyError?"currency is required":""}),i.a.createElement(R.a,{error:this.state.invoice_dateError,id:"invoice-dialog-invoice_date",label:"Invoice Date",name:"invoice_date",value:this.state.invoice_date,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.invoice_dateError?"Invoice Date is required":""}),i.a.createElement(R.a,{error:this.state.due_dateError,id:"invoice-dialog-due_date",label:"Due Date",name:"due_date",value:this.state.due_date,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.due_dateError?"Due date is required":""}),i.a.createElement(R.a,{error:this.state.vendor_nameError,id:"invoice-dialog-vendor_name",label:"Vendor Name",name:"vendor_name",value:this.state.vendor_name,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.vendor_nameError?"Vendor name is required":""}),i.a.createElement(R.a,{error:this.state.remittance_addressError,id:"invoice-dialog-remittance_address",label:"Remittance Address",name:"remittance_address",value:this.state.remittance_address,onChange:this.handleInputChange,margin:"normal",fullWidth:!0,disabled:this.props.loading,helperText:this.state.remittance_addressError?"Remittance Address is required":""})),i.a.createElement(x.a,null,i.a.createElement(D.a,{onClick:this.handleClose,color:"secondary",disabled:this.props.loading},"Cancel"),i.a.createElement(D.a,{onClick:this.handleSubmit,color:"primary",disabled:this.props.loading},"Save")))}}]),t}(i.a.Component),L=a(209),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleAccept=a.handleAccept.bind(Object(u.a)(a)),a.handleReject=a.handleReject.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleAccept",value:function(e){"function"===typeof this.props.onAccept&&this.props.onAccept(e)}},{key:"handleReject",value:function(e){"function"===typeof this.props.onReject&&this.props.onReject(e)}},{key:"render",value:function(){return i.a.createElement(M.a,{open:this.props.show,onClose:this.handleReject,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description"},i.a.createElement(T.a,{id:"confirm-dialog-title"},"Are you sure?"),i.a.createElement(V.a,null,i.a.createElement(L.a,{id:"confirm-dialog-description"},this.props.message)),i.a.createElement(x.a,null,i.a.createElement(D.a,{onClick:this.handleReject,color:"secondary"},"No"),i.a.createElement(D.a,{onClick:this.handleAccept,color:"primary",autoFocus:!0},"Yes")))}}]),t}(i.a.Component),q=a(223),U=a(210),z=a(100),J=a.n(z),P=a(165),F=a(98),G=a.n(F),H=a(99),K=a.n(H),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).classes=e.classes,a.handleClose=a.handleClose.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleClose",value:function(e){"function"===typeof this.props.onClose&&this.props.onClose(e)}},{key:"render",value:function(){return i.a.createElement(q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.show,autoHideDuration:6e3,onClose:this.handleClose},i.a.createElement(U.a,{className:this.classes[this.props.variant],message:this.props.message,action:[i.a.createElement(P.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},i.a.createElement(J.a,null))]}))}}]),t}(i.a.Component),$=Object(f.a)(function(e){return{success:{backgroundColor:G.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:K.a[700]},icon:{fontSize:20,opacity:.9}}})(Y);g.a.config();var Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).classes=e.classes,a.state={invoices:{},invoiceDialogShow:!1,invoiceDialogInvoice:null,invoiceDialogLoading:!1,confirmDialogShow:!1,confirmDialogMessage:"",confirmDialogOnAccept:null,messageShow:!1,messageMessage:"",messageVariant:"success"},a.handleInvoiceCreate=a.handleInvoiceCreate.bind(Object(u.a)(a)),a.handleInvoiceDeny=a.handleInvoiceDeny.bind(Object(u.a)(a)),a.handleInvoiceApprove=a.handleInvoiceApprove.bind(Object(u.a)(a)),a.handleInvoiceDialogSubmit=a.handleInvoiceDialogSubmit.bind(Object(u.a)(a)),a.handleInvoiceDialogClose=a.handleInvoiceDialogClose.bind(Object(u.a)(a)),a.handleConfirmDialogAccept=a.handleConfirmDialogAccept.bind(Object(u.a)(a)),a.handleConfirmDialogReject=a.handleConfirmDialogReject.bind(Object(u.a)(a)),a.handleMessageClose=a.handleMessageClose.bind(Object(u.a)(a)),a.socket=b()(Object({NODE_ENV:"production",PUBLIC_URL:""}).SOCKET_URL),a.socket.on("connect",function(){a.setState({messageShow:!0,messageMessage:"Connected to the server",messageVariant:"success"})}),a.socket.on("reconnected",function(){a.setState({messageShow:!0,messageMessage:"Re-connected to the server",messageVariant:"success"})}),a.socket.on("disconnect",function(e){a.setState({messageShow:!0,messageMessage:"Server disconnected: ".concat(e),messageVariant:"error"})}),a.socket.on("list",function(e){a.setState({invoices:Object(s.a)({},a.state.invoices,e)})}),a.socket.on("delete",function(e){Array.isArray(e)&&(e.forEach(function(e){delete a.state.invoices[e]}),a.setState({invoices:Object(s.a)({},a.state.invoices)}))}),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleInvoiceCreate",value:function(e){e.preventDefault();this.setState({invoiceDialogShow:!0,invoiceDialogInvoice:{invoice_number:"12345",total:0,currency:"USD",invoice_date:"2019-08-24",due_date:"2019-08-24",vendor_name:"Vendor",remittance_address:"Address"}})}},{key:"handleInvoiceApprove",value:function(e){var t=this;e.preventDefault();var a=this.state.invoices[e.currentTarget.getAttribute("data-invoice-id")];a&&this.socket.emit("update",a,function(){t.setState({messageShow:!0,messageMessage:"Approved invoice ".concat(a.invoice_number),messageVariant:"success"})})}},{key:"handleInvoiceDeny",value:function(e){var t=this;e.preventDefault();var a=e.currentTarget.getAttribute("data-invoice-id"),n=this.state.invoices[a];n&&this.setState({confirmDialogShow:!0,confirmDialogMessage:"Are you sure you wish to deny invoice ".concat(n.invoice_number),confirmDialogOnAccept:function(){t.socket.emit("deny",n._id,function(e){"done"===e?t.setState({messageShow:!0,messageMessage:"Denied invoice ".concat(n.invoice_number),messageVariant:"success"}):t.setState({messageShow:!0,messageMessage:"Error Dening invoice ".concat(n.invoice_number),messageVariant:"error"})})}})}},{key:"handleInvoiceDialogSubmit",value:function(e,t){var a=this;null!==e&&e.preventDefault(),this.setState({invoiceDialogLoading:!0}),t._id||(delete t._id,this.socket.emit("create",t,function(){a.setState({invoiceDialogLoading:!1,invoiceDialogShow:!1,messageShow:!0,messageMessage:"Created invoice ".concat(t.invoice_number),messageVariant:"success"})}))}},{key:"handleInvoiceDialogClose",value:function(e){null!==e&&e.preventDefault(),this.setState({invoiceDialogShow:!1})}},{key:"handleConfirmDialogAccept",value:function(e){e.preventDefault(),"function"===typeof this.state.confirmDialogOnAccept&&this.state.confirmDialogOnAccept(),this.setState({confirmDialogShow:!1})}},{key:"handleConfirmDialogReject",value:function(e){e.preventDefault(),this.setState({confirmDialogShow:!1})}},{key:"handleMessageClose",value:function(e){null!==e&&e.preventDefault(),this.setState({messageShow:!1})}},{key:"render",value:function(){var e=this,t=Object.values(this.state.invoices).map(function(t){return i.a.createElement(j.a,{key:t._id,id:t._id,className:e.classes.invoice},i.a.createElement(O.a,{expandIcon:i.a.createElement(A.a,null),"aria-controls":t._id+"-content",id:t._id+"-summary"},i.a.createElement("div",null,i.a.createElement(S.a,{variant:"h4",gutterBottom:!0},t.invoice_number," - ",t.status))),i.a.createElement(I.a,{id:t._id+"-content"},i.a.createElement(S.a,{variant:"h6",gutterBottom:!0,align:"left"},"Invoice Number : ",t.invoice_number," ",i.a.createElement("br",null),"Vendor Name : ",t.vendor_name," ",i.a.createElement("br",null),"Vendor Address : ",t.remittance_address," ",i.a.createElement("br",null),"Invoice Total : ",t.total," ",i.a.createElement("br",null),"Invoice Date : ",t.invoice_date," ",i.a.createElement("br",null),"Due Date : ",t.due_date)),i.a.createElement(k.a,null,i.a.createElement(D.a,{color:"primary","data-invoice-id":t._id,onClick:e.handleInvoiceDeny},"Deny"),i.a.createElement(D.a,{color:"primary","data-invoice-id":t._id,onClick:e.handleInvoiceApprove},"Approve")))});return i.a.createElement("div",{className:"App"},i.a.createElement(_.a,{position:"static",color:"primary"},i.a.createElement(E.a,null,i.a.createElement(S.a,{variant:"h6",color:"inherit",className:this.classes.title},"2ULaundry"),i.a.createElement(D.a,{color:"inherit",onClick:this.handleInvoiceCreate},"Create Invoices"))),i.a.createElement("main",null,i.a.createElement(C.a,{maxWidth:"lg",className:this.classes.container},i.a.createElement(S.a,{variant:"h4",className:this.classes.rootNode},"Invoices"),i.a.createElement(y.a,{className:this.classes.invoiceContainer},t),i.a.createElement(W,{show:this.state.invoiceDialogShow,loading:this.state.invoiceDialogLoading,invoice:this.state.invoiceDialogInvoice,onSubmit:this.handleInvoiceDialogSubmit,onClose:this.handleInvoiceDialogClose}),i.a.createElement(B,{show:this.state.confirmDialogShow,message:this.state.confirmDialogMessage,onAccept:this.handleConfirmDialogAccept,onReject:this.handleConfirmDialogReject}),i.a.createElement($,{show:this.state.messageShow,variant:this.state.messageVariant,message:this.state.messageMessage,onClose:this.handleMessageClose}))))}}]),t}(i.a.Component),X=Object(f.a)(function(e){return{title:{flexGrow:1,textAlign:"left"},container:{marginTop:"2rem",marginBottom:"2rem"},rootNode:{textAlign:"left",fontWeight:"bold"},invoiceContainer:{borderLeft:"solid 1px rgba(0, 0, 0, 0.1)",paddingTop:"1rem",paddingLeft:"2rem"},invoice:{position:"relative","&::before":{position:"absolute",top:"28px",left:"-2rem",width:"2rem",height:"0",borderBottom:"solid 1px rgba(0, 0, 0, 0.1)"}}}})(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.e7c0e715.chunk.js.map